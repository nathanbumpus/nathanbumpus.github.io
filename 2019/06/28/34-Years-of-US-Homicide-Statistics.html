<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      34 Years of United States Homicide Statistics - Retrieval &middot; Nathan's Personal Website
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href=/assets/css/styles.css>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href=/assets/apple-touch-icon-precomposed.png>
  <link rel="shortcut icon" href=/assets/favicon.ico>

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="Nathan&#39;s Personal Website" href="/feed.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>I am a recent Graduate from the University of Maine with a Professional Science Master's in Bioinformatics.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href=/>Home</a>

    

    
    
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About Me</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/blog.html">Blog</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/contact/">Contact Me</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/current_resume/">Current Resume</a>
        
      
    
      
    
      
    
      
    
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2019. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href=/ title="Home">Nathan's Personal Website</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
  <h1 class="page-title">34 Years of United States Homicide Statistics</h1>
    <p><a id="top"></a>Here is a project that I put together using an open source data set from Kaggle containing United States homicide data
       spanning the years 1980-2014. The purpose of this project is really just to show some of the cool graphs you can make using python. I made 
       use of the pandas, matplotlib, scipy and numpy python libraries.  If, for some reason, you are interested in downloading this data set you 
       can do so from this <a href="https://www.kaggle.com/murderaccountability/homicide-reports">link</a>.</p>

    <p>The first step of my analysis was to separate the the data set into two dataframes.  One for United States homicides and one for 
       homicides occuring in the state of Maine.  Once this is done we can begin with a comparison of Perpetrator and Victim Ages for both 
       dataframes.  We can visualize the difference in ages first by looking at the boxplots of median ages for each group.</p>

    <p align="center">
      <img src="/assets/images/boxplots.png" alt="boxplots"></p>

    <p>We can also look at the histograms plotted against an estimated gaussian distribution like so.</p>

    <p align="center">
      <img src="/assets/images/histograms.png" alt="histograms"></p>

    <p>And finally we can look at how the median ages for each group have changed over the period of 34 years by creating a line graph like the
       one shown below.</p>
    
    <p align="center">
      <img src="/assets/images/lines.png" alt="lines"></p>

    <p>Here are some general stats we can derive from the data concerning the ages of the perpetrators and victims</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
                              Homicide Age Statistics
      National Statistics                 Maine Statistics                
               Victim Age Perpetrator Age       Victim Age Perpetrator Age
count           397625.00       397625.00           727.00          727.00
mean                33.70           30.80            37.24           33.72
std                 16.91           12.84            18.76           13.36
min                  1.00            6.00             1.00            6.00
25%                 22.00           21.00            23.50           23.00
50%                 30.00           27.00            35.00           32.00
75%                 42.00           37.00            49.00           42.00
max                 99.00           99.00            99.00           86.00

</code></pre></div></div>

    <p>Generally speaking the perpetrators are usually younger than their victims.</p>
    
    <p>Next we can take a look at how often a particular weapon is used.  A bar plot is useful for this.  After grouping the weapons into
       categories we can build a barplot that resembles the following.</p>
    <p align="center">
      <img src="/assets/images/bar.png" alt="barplot"></p>
    
    <p>The data can be represented in a chart of percentages as well like this.</p>


<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

Percentage of Total Homicides by Weapon

                    National %  Maine %
Asphyxiation              1.63     3.03
Blunt Object             11.51    18.71
Drowning or Fall          0.22     0.83
Explosives or Fire        1.08     1.65
Firearm                  66.92    57.36
Knife                    18.23    18.16
Poison or Drugs           0.40     0.28

</code></pre></div></div>

    <p>Murders occur more often with the use of a blunt object in Maine in comparison to the rest of the country.  Interesting.

    <p>Lastly we can look at what time of year the murders are happening both in Maine and the rest of the United States.  We can start
       by again using a line graph to display the percentage of murders occuring over the 34 year span.</p>

    <p align="center">
      <img src="/assets/images/line_2.png" alt="lines"></p>

    <p>A pie chart can be used to display the percentage of murders occuring by month.</p>
    
    <p align="center">
      <img src="/assets/images/pie.png" alt="pie chart"></p>

    <p>We can see that nationally the percentage of total murders has decreased over time.  Also the most popular month to get killed in the
       state of Maine appears to be in December.  Below is a representation of the data in the form of a table.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

Percent of Total Homicides by Year

      National %  Maine %
Year                     
1980        3.95     3.99
1981        3.76     3.85
1982        3.58     2.89
1983        3.42     3.16
1984        3.11     2.48
1985        3.19     2.89
1986        3.47     2.75
1987        3.14     3.71
1988        3.10     4.13
1989        3.27     6.05
1990        3.44     2.06
1991        3.51      NaN
1992        3.62      NaN
1993        3.67     0.69
1994        3.51     3.16
1995        3.20     2.89
1996        2.87     3.44
1997        2.65     2.34
1998        2.43     3.30
1999        2.22     3.03
2000        2.19     1.93
2001        2.28     2.20
2002        2.40     1.65
2003        2.36     1.93
2004        2.37     2.48
2005        2.45     2.61
2006        2.53     2.75
2007        2.48     2.75
2008        2.25     3.16
2009        2.41     2.61
2010        2.32     3.30
2011        2.25     4.40
2012        2.27     3.85
2013        2.16     4.13
2014        2.15     3.44

Percent of Total Homicides by Month

           National %  Maine %
January          8.51     6.19
February         7.46     6.33
March            8.22     7.15
April            8.20     7.43
May              8.48     6.05
June             8.44     7.70
July             9.22     9.35
August           9.09     8.25
September        8.42     8.67
October          8.21     9.22
November         7.50    12.79
December         8.27    10.87

</code></pre></div></div> 

    <p>There is obviously a lot more that we could do in the exploration of this data set, but the point of this project was to show 
       some of the visual representations of data that can be produced using python.  I have posted the code below to serve as a reference
       that can easily modified to fit your own data set or to further explore this one.  Shoot me an email and let me know if it worked for
       you or if you have improvements you would like to share.  Happy coding!</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

#!/usr/bin/env python3
_author_ = 'Nathan Bumpus'
_copyright_ = 'Copyright 2019'
_version_ = '1.0'
_date_ = '06282019'

#homicide_program.py
#By Nathan Bumpus
#Comparison of National and Maine Homicide Data 1980 - 2014

import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import numpy as np
from matplotlib import style
import scipy.stats
style.use('ggplot')

def perp_vs_vict(df_nation, df_maine):

    perp_age = df_nation['Perpetrator Age'].groupby('Year').median()
    vict_age = df_nation['Victim Age'].groupby('Year').median()
    maine_perp_age = df_maine['Perpetrator Age'].groupby('Year').median()
    maine_vict_age = df_maine['Victim Age'].groupby('Year').median()
    nperp_age = df_nation['Perpetrator Age']
    mperp_age = df_maine['Perpetrator Age']
    nvict_age = df_nation['Victim Age']
    mvict_age = df_maine['Victim Age']

#Age Boxplots
    boxes = [nperp_age, mperp_age, nvict_age, mvict_age]
    labels = ['National Perpetrator', 'Maine Perpetrator', 'National Victim', 'Maine Victim']
    fig = plt.figure(figsize = (13, 6.5))
    plt.boxplot(boxes, labels = labels, patch_artist = True, showfliers = False, medianprops = dict(linewidth=1,
                color = 'black'))
    plt.title('Boxplots of Perpetrator and Victim Ages (outliers removed)')
    plt.ylabel('Age')
    plt.show()

#Age Histograms with Fitted Gaussian Distribution
    fig1, axes = plt.subplots(nrows = 2, ncols = 2, tight_layout = True, figsize = (13, 6.5))
    bins = 50
    n, bins, patches = axes[0, 0].hist(np.array(nperp_age), bins, density = True, color = 'blue')
    (mu, sigma) = scipy.stats.norm.fit(nperp_age)
    y = scipy.stats.norm.pdf(bins, mu, sigma)
    axes[0, 0].plot(bins, y, 'k--', linewidth = 2)
    axes[0, 0].set_title('National Perpetrator')
    axes[0, 0].set_ylabel('Frequency')
    axes[0, 0].set_xlabel('Age')

    n, bins, patches = axes[0,1].hist(np.array(mperp_age), bins, density = True, color = 'green')
    (mu, sigma) = scipy.stats.norm.fit(mperp_age)
    y = scipy.stats.norm.pdf(bins, mu, sigma)
    axes[0, 1].plot(bins, y, 'k--', linewidth = 2)
    axes[0, 1].set_title('Maine Perpetrator')
    axes[0, 1].set_ylabel('Frequency')
    axes[0, 1].set_xlabel('Age')

    n, bins, patches = axes[1, 0].hist(np.array(nvict_age), bins, density = True, color = 'red')
    (mu, sigma) = scipy.stats.norm.fit(nvict_age)
    y = scipy.stats.norm.pdf(bins, mu, sigma)
    axes[1, 0].plot(bins, y, 'k--', linewidth = 2)
    axes[1, 0].set_title('National Victim')
    axes[1, 0].set_ylabel('Frequency')
    axes[1, 0].set_xlabel('Age')

    n, bins, patches = axes[1, 1].hist(np.array(mvict_age), bins, density = True, color = 'orange')
    (mu, sigma) = scipy.stats.norm.fit(mvict_age)
    y = scipy.stats.norm.pdf(bins, mu, sigma)
    axes[1, 1].plot(bins, y, 'k--', linewidth = 2)
    axes[1, 1].set_title('Maine Victim')
    axes[1, 1].set_ylabel('Frequency')
    axes[1, 1].set_xlabel('Age')
    plt.suptitle('Histograms')
    fig.tight_layout()
    plt.show()

#Median Age Plots
    fig2 = plt.figure(figsize = (13, 6.5))
    ax1 = fig2.add_subplot(211)
    ax1.plot(perp_age, label='Perpetrator', color='blue')
    ax1.plot(vict_age, label='Victim', color='red')
    ax1.set_title('National Perpetrator and Victim Median Ages')
    ax1.set_ylabel('Median Age')
    ax1.set_xlabel('Year')
    ax1.legend()
    ax2 = fig2.add_subplot(212)
    ax2.plot(maine_perp_age, label='Perpetrator', color='green')
    ax2.plot(maine_vict_age, label='Victim', color='orange')
    ax2.set_title('Maine Perpetrator and Victim Median Ages')
    ax2.set_ylabel('Median Age')
    ax2.set_xlabel('Year')
    ax2.legend()
    plt.subplots_adjust(hspace=0.5)
    plt.show()

#Age Statistics Table
    print('{: >45}'.format("Homicide Age Statistics"))
    print(pd.concat([df_nation.describe().round(2), df_maine.describe().round(2)], keys = ['National Statistics',
                        'Maine Statistics'], axis = 1))

def weapons(df_nation, df_maine):

    n_weapons = pd.Categorical(df_nation['Weapon'])
    m_weapons = pd.Categorical(df_maine['Weapon'])
    n_weap_freq = n_weapons.value_counts() / len(n_weapons) * 100
    m_weap_freq = m_weapons.value_counts() / len(m_weapons) * 100

#Weapons Barplot
    bars = [n_weap_freq, m_weap_freq]
    x = np.arange(7)
    labels = ['Asphyxiation', 'Blunt Object', 'Drowning or Fall', 'Explosives or Fire', 'Firearm', 'Knife',
              'Poison or Drugs']
    fig = plt.figure(figsize = (13, 6.5))
    plt.bar(x - 0.2, bars[0], color = 'blue', width = 0.4, label = 'National')
    plt.bar(x + 0.2, bars[1], color = 'green', width = 0.4, label = 'Maine')
    plt.xticks(x, labels)
    plt.legend(loc = 1, bbox_to_anchor = (0.20, 0.85), prop = {'size' :  15})
    plt.ylabel('% of Homicides')
    plt.xlabel('Weapons Used')
    plt.title('Weapons Used in Homicides')
    plt.annotate('Firearms are the most popular weapons', xy = (4, 60), xytext = (0, 35),
                 arrowprops = dict(facecolor = 'black', shrink = 0.2))
    plt.tight_layout()
    plt.show()

#Weapons Statistics Table
    print()
    print('{:>38}'.format("Percentage of Total Homicides by Weapon"))
    print()
    print(pd.concat([n_weap_freq.round(2), m_weap_freq.round(2)], keys = ['National %', 'Maine %'], axis = 1))

def months(df_nation, df_maine):

    categories = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',
                  'November', 'December']
    x = np.arange(12)
    nseason = pd.Categorical(df_nation['Month'], categories)
    mseason = pd.Categorical(df_maine['Month'], categories)
    nseason_freq = nseason.value_counts() / len(nseason) * 100
    mseason_freq = mseason.value_counts() / len(mseason) * 100
    nyear = df_nation.groupby('Year').size()
    nyear_per = nyear / len(df_nation) * 100
    myear = df_maine.groupby('Year').size()
    myear_per = myear / len(df_maine) * 100

#Total Homicides by Year
    nyear_per.plot(label = 'National', color = 'blue', figsize = (13, 6.5))
    myear_per.plot(label = 'Maine', color = 'green')
    plt.title('Percentage of Total Homicides by Year')
    plt.ylabel('Percent')
    plt.xlabel('Year')
    plt.legend(prop = {'size' : 15})
    plt.show()

#Months Pie Plots
    fig1 , ax1 = plt.subplots(ncols = 2, nrows = 1, figsize = (13, 6.5))
    explode = (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.0)
    ax1[0].pie(np.array(nseason_freq), labels = categories, shadow = True, startangle = 90,
            autopct = '%1.1f%%', explode = explode)
    ax1[0].axis('equal')
    ax1[0].set_title('National Percent of Total Homicides by Month')
    explode = (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0)
    ax1[1].pie(np.array(mseason_freq), labels = categories, shadow = True, startangle = 90,
               autopct = '%1.1f%%', explode = explode)
    ax1[1].axis('equal')
    ax1[1].set_title('Maine Percent of Total Homicides by Month')
    plt.show()

#Months Statistics Table
    print()
    print("Percent of Total Homicides by Year")
    print()
    print(pd.concat([nyear_per.round(2), myear_per.round(2)], keys = ['National %', 'Maine %'], axis = 1))
    print()
    print("Percent of Total Homicides by Month")
    print()
    print(pd.concat([nseason_freq.round(2), mseason_freq.round(2)], keys = ['National %', 'Maine %'], axis = 1))


#Clean data resulting in two dataframes
df = pd.read_csv('database.csv', low_memory = False)
del df['Record ID']
del df['Agency Code']
del df['Agency Name']
del df['Agency Type']
del df['Incident']
del df['Victim Ethnicity']
del df['Perpetrator Ethnicity']
del df['Victim Count']
del df['Perpetrator Count']
del df['Record Source']
del df['Relationship']
del df['Perpetrator Race']
del df['City']
del df['Victim Race']
del df['Crime Type']
df.to_csv('database_v2.csv', encoding = 'UTF-8')
df = pd.read_csv('database_v2.csv',index_col = 0, low_memory = False)
df.set_index('Year', inplace = True)
df = df.replace('Unknown', np.NaN)
df = df.replace(0, np.NaN)
df = df.dropna(how = 'any')
df['Perpetrator Age'] = df['Perpetrator Age'].astype(float)
df = df[ df['Perpetrator Age'] < 123]
df = df[ df['Perpetrator Age'] > 5]
df = df[df['Victim Age'] < 123]
df = df[df['Victim Age'] > 0]
df['Weapon'] = df['Weapon'].replace(('Handgun', 'Shotgun', 'Gun', 'Rifle'), 'Firearm')
df['Weapon'] = df['Weapon'].replace(('Drowning', 'Fall'), 'Drowning or Fall')
df['Weapon'] = df['Weapon'].replace(('Explosives', 'Fire'), 'Explosives or Fire')
df['Weapon'] = df['Weapon'].replace(('Poison', 'Drugs'), 'Poison or Drugs')
df['Weapon'] = df['Weapon'].replace(('Strangulation', 'Suffocation'), 'Asphyxiation')
df_nation = df
df_maine = df[df_nation['State'] == 'Maine']

#User Interface
print("This program provides an analysis of Homicide Data collected from 1980 - 2014")
resp = 'y'
while resp[0] == 'y':
    print("Please choose from the following options.")
    print()
    print("Enter 1 to view analysis of Perpetrator and Victim Ages.")
    print("Enter 2 to view an analysis Weapons Used.")
    print("Enter 3 to view an analysis homicides by year and month.")
    print()
    choice = input("Which option do you choose?: ")
    if choice == '1':
        perp_vs_vict(df_nation, df_maine)
    elif choice == '2':
        weapons(df_nation, df_maine)
    elif choice == '3':
        months(df_nation, df_maine)
    else:
        print("You must enter a number from 1 to 3.")
        resp = 'y'
    print()
    resp = input("Would you like to view more Homicide Analysis? y/n: ").lower()
    while resp[0] != 'y' and resp[0] != 'n':
        resp = input("Please enter y or n to continue: ").lower()
print("Thanks for watching")

</code></pre></div></div>

<p><a href="/blog.html">back to blog</a>  <a href="#top">back to top</a></p>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
